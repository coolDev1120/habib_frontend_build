{"version":3,"sources":["pages/dashboard/contact/index.js"],"names":["StyledMenu","styled","props","elevation","anchorOrigin","vertical","horizontal","transformOrigin","theme","borderRadius","marginTop","spacing","minWidth","color","palette","mode","grey","boxShadow","padding","fontSize","text","secondary","marginRight","backgroundColor","alpha","primary","main","action","selectedOpacity","EcommerceProductList","useState","data","setData","perpage","setPerpage","current","setCurrent","total","setTotal","search","Setsearch","search2","Setsearch2","order","setOrder","field","setField","refresh","Setrefresh","setCompany","selectedCompany","PageTitle","ref1","useRef","columns","title","dataIndex","sorter","a","b","name","age","key","render","_","id","size","to","variant","style","marginLeft","onConfirm","confirm","okText","cancelText","e","console","log","axios","post","process","then","res","flag","message","config","top","duration","info","useEffect","temp","i","length","val","value","label","company_name","push","selectOption","option","parseInt","startdate","moment","format","React","anchorEl","setAnchorEl","open","Boolean","handleClose","sx","textTransform","fontWeight","mb","className","flex","textAlign","xs","lg","width","mr","labelId","onChange","target","onKeyPress","event","placeholder","marginBottom","MenuListProps","onClose","onClick","targetRef","filename","toPdf","textDecoration","startIcon","bordered","dataSource","pagination","filters","extra","page","pageSize"],"mappings":"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","file":"static/js/44.4c28456a.chunk.js","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport Pdf from 'react-to-pdf';\r\nimport { Table, Pagination, Space, Input, Popconfirm, message } from 'antd';\r\n// icons\r\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\r\nimport axios from 'axios';\r\nimport { Select, FormControl, MenuItem, InputLabel, Box, Typography, Button } from '@mui/material'\r\nimport moment from 'moment'\r\nimport { Link } from 'react-router-dom';\r\nimport { styled, alpha } from '@mui/material/styles';\r\n\r\nimport Menu from '@mui/material/Menu';\r\nimport Page from '../../../components/Page';\r\n\r\n\r\nconst StyledMenu = styled((props) => (\r\n    <Menu\r\n        elevation={0}\r\n        anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'right',\r\n        }}\r\n        transformOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'right',\r\n        }}\r\n        {...props}\r\n    />\r\n))(({ theme }) => ({\r\n    '& .MuiPaper-root': {\r\n        borderRadius: 6,\r\n        marginTop: theme.spacing(1),\r\n        minWidth: 180,\r\n        color:\r\n            theme.palette.mode === 'light' ? 'rgb(55, 65, 81)' : theme.palette.grey[300],\r\n        boxShadow:\r\n            'rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px',\r\n        '& .MuiMenu-list': {\r\n            padding: '4px 0',\r\n        },\r\n        '& .MuiMenuItem-root': {\r\n            '& .MuiSvgIcon-root': {\r\n                fontSize: 18,\r\n                color: theme.palette.text.secondary,\r\n                marginRight: theme.spacing(1.5),\r\n            },\r\n            '&:active': {\r\n                backgroundColor: alpha(\r\n                    theme.palette.primary.main,\r\n                    theme.palette.action.selectedOpacity,\r\n                ),\r\n            },\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function EcommerceProductList() {\r\n    const [data, setData] = useState([]);\r\n    const [perpage, setPerpage] = useState(10);\r\n    const [current, setCurrent] = useState(1);\r\n    const [total, setTotal] = useState(0);\r\n    const [search, Setsearch] = useState('');\r\n    const [search2, Setsearch2] = useState('');\r\n    const [order, setOrder] = useState('descend');\r\n    const [field, setField] = useState('id');\r\n    const [refresh, Setrefresh] = useState(false);\r\n    const [companies, setCompany] = useState([])\r\n    const [selectedCompany, setSelectedCompany] = useState('none')\r\n\r\n    const PageTitle = styled('div')(({ theme }) => ({\r\n        backgroundColor: `${alpha(theme.palette.primary.main, 0.08)}`\r\n    }));\r\n\r\n    const ref1 = useRef();\r\n\r\n    const columns = [\r\n        {\r\n            title: 'REF',\r\n            dataIndex: 'key',\r\n        },\r\n        {\r\n            title: 'Surename',\r\n            dataIndex: 'customer_name',\r\n            sorter: (a, b) => a.name - b.name,\r\n        },\r\n        {\r\n            title: 'ADDRESS',\r\n            dataIndex: 'address',\r\n            sorter: (a, b) => a.age - b.age,\r\n        },\r\n        {\r\n            title: 'POSTCODE',\r\n            dataIndex: 'postcode',\r\n            sorter: (a, b) => a.age - b.age,\r\n        },\r\n        {\r\n            title: 'PHONE',\r\n            dataIndex: 'phone',\r\n            sorter: (a, b) => a.age - b.age,\r\n        },\r\n        {\r\n            title: 'ACTION',\r\n            key: 'action',\r\n            render: (_, id) => (\r\n                <Space size=\"middle\">\r\n                    <Link to={`/dashboard/contact/edit/${id.id}`}>\r\n                        <Button\r\n                            variant=\"outlined\"\r\n                            color=\"primary\"\r\n                            size=\"small\"\r\n                            style={{ marginLeft: 16 }}\r\n                        >\r\n                            Edit\r\n                        </Button>\r\n                    </Link>\r\n                    <Popconfirm\r\n                        title=\"Are you sure to delete this item?\"\r\n                        onConfirm={() => confirm(id)}\r\n                        okText=\"Yes\"\r\n                        cancelText=\"No\"\r\n                    >\r\n                        <Button\r\n                            variant=\"outlined\"\r\n                            color=\"primary\"\r\n                            size=\"small\"\r\n                            style={{ marginLeft: 16 }}\r\n                        >\r\n                            Delete\r\n                        </Button>\r\n                    </Popconfirm>\r\n                </Space>\r\n            ),\r\n        },\r\n\r\n    ];\r\n\r\n    const confirm = (e) => {\r\n        console.log(e.id)\r\n        axios.post(`${process.env.REACT_APP_SERVER_URL}/deleteContact`, { id: e.id })\r\n            .then((res) => {\r\n                console.log(res.data)\r\n                if (res.data.flag === \"success\") {\r\n                    message.config({ top: 100, duration: 5, });\r\n                    message.info('Successfully delected');\r\n                    Setrefresh(!refresh);\r\n                }\r\n            })\r\n    };\r\n\r\n    const onChange = (pagination, filters, sorter, extra) => {\r\n        if (sorter.order) {\r\n            setOrder(sorter.order);\r\n            if (sorter.field === 'key') {\r\n                setField('id');\r\n            }\r\n            else {\r\n                setField(sorter.field);\r\n            }\r\n\r\n        }\r\n        else {\r\n            setOrder('descend');\r\n            setField('id');\r\n        }\r\n    };\r\n\r\n    const onPageChange = (page, pageSize) => {\r\n        console.log(page, pageSize)\r\n        setCurrent(page);\r\n        setPerpage(pageSize);\r\n    }\r\n\r\n    const handlekeypress = (event) => {\r\n        if (event.key === \"Enter\") {\r\n            Setsearch2(search);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        // get Companies\r\n        axios.post(`${process.env.REACT_APP_SERVER_URL}/getCompany`)\r\n            .then((res) => {\r\n                var temp = [];\r\n                for (let i = 0; i < res.data.length; i++) {\r\n                    let val = {}\r\n                    val.value = res.data[i].id;\r\n                    val.label = res.data[i].company_name;\r\n                    temp.push(val)\r\n                }\r\n                console.log(temp)\r\n                setCompany(temp)\r\n            })\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        var selectOption = []\r\n        if (selectedCompany !== 'none') {\r\n            selectOption.push({ name: 'company', value: selectedCompany })\r\n        }\r\n        axios\r\n            .post(`${process.env.REACT_APP_SERVER_URL}/getContact`,\r\n                { current: current, perpage: perpage, search: search2, order: order, field: field, option: selectOption })\r\n            .then((res) => {\r\n                var temp = [];\r\n                for (const i in res.data.data) {\r\n                    temp[i] = res.data.data[i];\r\n                    temp[i].key = parseInt(perpage * (current - 1)) + parseInt(i) + 1;\r\n                    temp[i].startdate = moment(res.data.data[i].startdate).format('YYYY-MM-DD');\r\n                }\r\n                setData(res.data.data);\r\n                setTotal(res.data.total);\r\n            })\r\n    }, [current, perpage, search2, order, field, refresh, selectedCompany]);\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Page title=\"Contacts\">\r\n                <PageTitle>\r\n                    <Typography\r\n                        color=\"text.primary\"\r\n                        sx={{\r\n                            textTransform: 'uppercase',\r\n                            fontSize: '23px',\r\n                            fontWeight: 'bold',\r\n                            padding: '10px',\r\n                            mb: '20px'\r\n                        }}>\r\n                        All CONTACTS\r\n                    </Typography>\r\n                </PageTitle>\r\n                <Box>\r\n                    <Box className='toolbar'>\r\n\r\n                        <Box sx={{ flex: '1 1 0%', textAlign: { xs: 'let', lg: 'right' } }}>\r\n                            <FormControl sx={{ width: '100px', mb: '10px', mr: '10px' }} size=\"small\">\r\n                                <InputLabel id=\"select-subcategory\"></InputLabel>\r\n                                <Select\r\n                                    labelId=\"select-subcategory\"\r\n                                    id=\"subcategory\"\r\n                                    value={perpage}\r\n                                    onChange={(e) => setPerpage(e.target.value)}\r\n                                >\r\n                                    <MenuItem value={5}>5</MenuItem>\r\n                                    <MenuItem value={10}>10</MenuItem>\r\n                                    <MenuItem value={25}>25</MenuItem>\r\n                                    <MenuItem value={50}>50</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n                            <Input onChange={(e) => Setsearch(e.target.value)} onKeyPress={handlekeypress} size=\"large\" placeholder=\"Search...\" style={{ width: '200px', marginBottom: '10px', marginRight: '20px' }} />\r\n                            <StyledMenu\r\n                                id=\"demo-customized-menu\"\r\n                                MenuListProps={{\r\n                                    'aria-labelledby': 'demo-customized-button',\r\n                                }}\r\n                                anchorEl={anchorEl}\r\n                                open={open}\r\n                                onClose={handleClose}\r\n                            >\r\n                                <MenuItem onClick={handleClose} >\r\n                                    <Pdf targetRef={ref1} filename=\"document.pdf\">\r\n                                        {({ toPdf }) => (\r\n                                            <div onClick={toPdf} className=\"button\">\r\n                                                Export as PDF\r\n                                            </div>\r\n                                        )}\r\n                                    </Pdf>\r\n                                </MenuItem>\r\n                            </StyledMenu>\r\n\r\n                            <Link to=\"/dashboard/contact/add\" style={{ textDecoration: 'none' }}>\r\n                                <Button className='btn_info' variant=\"contained\" startIcon={<AddCircleOutlineIcon />} sx={{ mb: '10px' }}> Add New Contact </Button>\r\n                            </Link>\r\n                        </Box>\r\n                    </Box>\r\n                </Box>\r\n                <Box >\r\n                    <Table className='table-scroll' bordered='true' columns={columns} dataSource={data} onChange={onChange} />\r\n                </Box>\r\n                <Pagination\r\n                    onChange={onPageChange}\r\n                    total={total}\r\n                    // itemRender={itemRender}\r\n                    pageSize={perpage}\r\n                    style={{ marginTop: '20px', textAlign: 'right' }} />\r\n            </Page>\r\n        </>\r\n    );\r\n}\r\n\r\n"],"sourceRoot":""}